# ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ“ä½œæŒ‡å—

## âš ï¸ å½“å‰çŠ¶æ€
- âœ… ä»£ç å·²å‡†å¤‡å°±ç»ªï¼ˆæäº¤å·ï¼š9636018ï¼‰
- âœ… æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼ˆ100%æˆåŠŸç‡ï¼‰
- â³ éœ€è¦é…ç½® Cloudflare API å¯†é’¥

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

### âœ… å·²å®Œæˆ
- [x] ä»£ç ä¿®æ”¹å®Œæˆï¼ˆæ— é™æ•°æ®æºæ”¯æŒï¼‰
- [x] æœ¬åœ°æ„å»ºæˆåŠŸ
- [x] æœ¬åœ°æµ‹è¯•é€šè¿‡ï¼ˆ10/10æºæˆåŠŸï¼‰
- [x] Gitæäº¤å¹¶æ¨é€åˆ°GitHub
- [x] åˆ›å»ºéƒ¨ç½²è„šæœ¬ï¼ˆdeploy.shï¼‰
- [x] ç¼–å†™å®Œæ•´æ–‡æ¡£

### â³ å¾…å®Œæˆ
- [ ] é…ç½® Cloudflare API å¯†é’¥
- [ ] æ‰§è¡Œç”Ÿäº§éƒ¨ç½²
- [ ] éªŒè¯éƒ¨ç½²ç»“æœ

## ğŸ”‘ æ­¥éª¤1ï¼šé…ç½® Cloudflare API å¯†é’¥

### 1.1 è·å–APIå¯†é’¥

**è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š**

1. **è¿›å…¥ Deploy æ ‡ç­¾é¡µ**
   - åœ¨å·¦ä¾§å¯¼èˆªæ æ‰¾åˆ° **Deploy** æ ‡ç­¾
   - ç‚¹å‡»æ‰“å¼€

2. **åˆ›å»º Cloudflare API Token**
   - æŒ‰ç…§é¡µé¢æŒ‡å¼•æ“ä½œ
   - éœ€è¦çš„æƒé™ï¼š
     - Cloudflare Pages: Edit
     - Account Settings: Read

3. **ä¿å­˜APIå¯†é’¥**
   - å¤åˆ¶ç”Ÿæˆçš„API Token
   - åœ¨Deployæ ‡ç­¾ä¸­ä¿å­˜

### 1.2 éªŒè¯é…ç½®

é…ç½®å®Œæˆåï¼Œè¿”å›è¿™é‡Œå‘Šè¯‰æˆ‘ï¼š"APIå¯†é’¥å·²é…ç½®"ï¼Œæˆ‘ä¼šç«‹å³å¸®æ‚¨éƒ¨ç½²ã€‚

## ğŸš€ æ­¥éª¤2ï¼šæ‰§è¡Œç”Ÿäº§éƒ¨ç½²

**é…ç½®å¥½APIå¯†é’¥åï¼Œæˆ‘å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š**

### æ–¹æ³•1ï¼šä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /home/user/webapp
./deploy.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ„å»ºç”Ÿäº§ç‰ˆæœ¬
2. âœ… éƒ¨ç½²åˆ°Cloudflare Pages
3. âœ… æ˜¾ç¤ºéƒ¨ç½²ç»“æœå’Œè®¿é—®åœ°å€

### æ–¹æ³•2ï¼šæ‰‹åŠ¨æ­¥éª¤éƒ¨ç½²

å¦‚æœè„šæœ¬å¤±è´¥ï¼Œæˆ‘ä¼šæ‰§è¡Œä»¥ä¸‹æ‰‹åŠ¨æ­¥éª¤ï¼š

```bash
# 1. æ„å»º
cd /home/user/webapp
npm run build

# 2. éƒ¨ç½²
npx wrangler pages deploy dist --project-name risk-alert-platform

# 3. éªŒè¯
curl https://risk-alert-platform.pages.dev/api/datasources
```

## ğŸ“Š æ­¥éª¤3ï¼šéªŒè¯éƒ¨ç½²

### 3.1 æ£€æŸ¥æ•°æ®æºçŠ¶æ€

```bash
# æŸ¥çœ‹æ•°æ®æºæ€»æ•°ï¼ˆé¢„æœŸï¼š32ä¸ªï¼‰
curl -s https://risk-alert-platform.pages.dev/api/datasources | jq '.data | length'

# æŸ¥çœ‹å¯ç”¨çš„æ•°æ®æº
curl -s https://risk-alert-platform.pages.dev/api/datasources | jq '.data[] | select(.enabled == 1) | {id, name}'
```

### 3.2 è§¦å‘ä¸€é”®çˆ¬å–

```bash
curl -X POST https://risk-alert-platform.pages.dev/api/crawl/all
```

**é¢„æœŸç»“æœ**ï¼š
```json
{
  "success": true,
  "message": "æ›´æ–°å®Œæˆï¼æˆåŠŸ: 30+, å¤±è´¥: <5, æ–°å¢é£é™©: XXX",
  "data": {
    "success": 30,
    "failed": 2,
    "totalRisks": 150
  }
}
```

### 3.3 æŸ¥çœ‹ç»Ÿè®¡æ•°æ®

```bash
curl -s https://risk-alert-platform.pages.dev/api/statistics | jq '.'
```

**é¢„æœŸæ”¹å–„**ï¼š
| æŒ‡æ ‡ | éƒ¨ç½²å‰ | éƒ¨ç½²å | æå‡ |
|------|--------|--------|------|
| çˆ¬å–æºæ•° | 8ä¸ª | 32ä¸ª | +300% |
| è¦†ç›–ç‡ | 25% | 100% | +300% |
| é£é™©æ•°é‡ | å°‘é‡ | 3-4å€ | +300% |

## ğŸ¯ éƒ¨ç½²æˆåŠŸæ ‡å¿—

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. âœ… **æ›´å¤šæ•°æ®æºè¢«çˆ¬å–**
   - ä¹‹å‰ï¼šåªæœ‰8ä¸ªæºæœ‰lastCrawlTime
   - ç°åœ¨ï¼š32ä¸ªæºï¼ˆæˆ–è‡³å°‘25+ï¼‰éƒ½æœ‰lastCrawlTime

2. âœ… **æ›´å¤šé£é™©è®°å½•**
   - ä¹‹å‰ï¼šæ•°æ®è¾ƒå°‘
   - ç°åœ¨ï¼šé£é™©æ•°é‡æ˜¾è‘—å¢åŠ 

3. âœ… **å¯ä»¥éšæ—¶æ·»åŠ æ–°æº**
   - æ— æ•°é‡é™åˆ¶
   - æ·»åŠ åè‡ªåŠ¨çˆ¬å–

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šéƒ¨ç½²å¤±è´¥ - API Tokené”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR: Authentication failed
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥API Tokenæ˜¯å¦æ­£ç¡®å¤åˆ¶
2. ç¡®è®¤Tokenæƒé™åŒ…å« Cloudflare Pages: Edit
3. é‡æ–°ç”ŸæˆTokenå¹¶ä¿å­˜

### é—®é¢˜2ï¼šéƒ¨ç½²æˆåŠŸä½†æ•°æ®æºæœªæ›´æ–°

**å¯èƒ½åŸå› **ï¼šç¼“å­˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¼ºåˆ¶åˆ·æ–°
curl -X POST https://risk-alert-platform.pages.dev/api/crawl/all

# ç­‰å¾…30ç§’åå†æ¬¡æŸ¥çœ‹
sleep 30
curl https://risk-alert-platform.pages.dev/api/datasources
```

### é—®é¢˜3ï¼šçˆ¬å–å¤±è´¥ç‡é«˜

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. æŸ¥çœ‹å…·ä½“å¤±è´¥çš„æº
2. æ£€æŸ¥æ˜¯å¦æ˜¯RSSå¤±æ•ˆ
3. ç¦ç”¨æŒç»­å¤±è´¥çš„æº

## ğŸ“± éƒ¨ç½²åæ“ä½œ

### 1. ç™»å½•åå°éªŒè¯

1. è®¿é—®ï¼šhttps://risk-alert-platform.pages.dev
2. ç™»å½•ç®¡ç†åå°
3. æŸ¥çœ‹"æ•°æ®æºç®¡ç†"é¡µé¢
4. ç¡®è®¤æ‰€æœ‰æºéƒ½æ˜¾ç¤ºæœ€æ–°çˆ¬å–æ—¶é—´

### 2. æ·»åŠ æ–°æ•°æ®æºæµ‹è¯•

å°è¯•æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„æ•°æ®æºï¼š

```bash
curl -X POST https://risk-alert-platform.pages.dev/api/datasources \
  -H "Content-Type: application/json" \
  -d '{
    "name": "æµ‹è¯•æº",
    "url": "https://rss.nytimes.com/services/xml/rss/nyt/Technology.xml",
    "xpathRules": "//item",
    "fieldMapping": "{\"title\":\"//title\",\"content\":\"//description\",\"time\":\"//pubDate\"}",
    "enabled": 1
  }'
```

ç„¶åè§¦å‘çˆ¬å–éªŒè¯æ–°æºå¯ä»¥æ­£å¸¸å·¥ä½œã€‚

### 3. ç›‘æ§å’Œç»´æŠ¤

**å®šæœŸæ£€æŸ¥**ï¼ˆå»ºè®®æ¯å‘¨ï¼‰ï¼š
- æŸ¥çœ‹æ•°æ®æºæˆåŠŸç‡
- ç¦ç”¨é•¿æœŸå¤±è´¥çš„æº
- æ·»åŠ æ–°çš„é‡è¦æº
- æŸ¥çœ‹é£é™©è¶‹åŠ¿

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### å½“å‰çŠ¶æ€æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥ç”Ÿäº§ç¯å¢ƒæ•°æ®æº
curl -s https://risk-alert-platform.pages.dev/api/datasources | jq '.data[] | {id, name, enabled, lastCrawlTime}' | head -50

# æ£€æŸ¥ç»Ÿè®¡æ•°æ®
curl -s https://risk-alert-platform.pages.dev/api/statistics | jq '.data'

# æ£€æŸ¥æœ€æ–°é£é™©
curl -s https://risk-alert-platform.pages.dev/api/risks?page=1&limit=10 | jq '.data[0:5]'
```

## âœ… éƒ¨ç½²å®Œæˆç¡®è®¤

éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®è®¤ä»¥ä¸‹å‡ ç‚¹ï¼š

- [ ] æ•°æ®æºæ€»æ•°æ˜¾ç¤ºæ­£ç¡®ï¼ˆ32ä¸ªï¼‰
- [ ] å¯ç”¨çš„æºå¤§éƒ¨åˆ†éƒ½æœ‰lastCrawlTime
- [ ] çˆ¬å–æˆåŠŸç‡åœ¨80%ä»¥ä¸Š
- [ ] é£é™©æ•°é‡æ˜æ˜¾å¢åŠ 
- [ ] å¯ä»¥é€šè¿‡Webç•Œé¢æ·»åŠ æ–°æº
- [ ] æ–°æ·»åŠ çš„æºå¯ä»¥è¢«æ­£å¸¸çˆ¬å–

---

## ğŸ‰ å‡†å¤‡å°±ç»ªï¼

**ç°åœ¨è¯·æ‚¨æ‰§è¡Œï¼š**

1. ğŸ“± æ‰“å¼€å·¦ä¾§çš„ **Deploy** æ ‡ç­¾
2. ğŸ”‘ æŒ‰ç…§æŒ‡å¼•é…ç½® Cloudflare API Token
3. ğŸ’¾ ä¿å­˜é…ç½®
4. ğŸ’¬ å›åˆ°è¿™é‡Œå‘Šè¯‰æˆ‘ï¼š"APIå¯†é’¥å·²é…ç½®"

æˆ‘ä¼šç«‹å³å¸®æ‚¨å®Œæˆéƒ¨ç½²ï¼ğŸš€

---

**é¡¹ç›®ä¿¡æ¯**ï¼š
- ä»“åº“ï¼šhttps://github.com/shanshanyin5-png/risk-alert-platform
- æäº¤å·ï¼š9636018
- å½“å‰ç‰ˆæœ¬ï¼šæ— é™æ•°æ®æºæ”¯æŒ
- æµ‹è¯•çŠ¶æ€ï¼šâœ… å·²é€šè¿‡
